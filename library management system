#include<stdio.h>
#include<stdlib.h>
#include<string.h>
#include<ctype.h>

#define MAX_BOOKS 100
#define MAX_NAME_LENGTH 50
#define MAX_PUBLISHER_LENGTH 50

struct library
{
char bk_name[MAX_NAME_LENGTH];
char publisher[MAX_PUBLISHER_LENGTH];
float price;
int is_available; // 1 for available, 0 for borrowed
};

struct library l[MAX_BOOKS];
int book_count=0;

void clearInputBuffer()
{
int c;
while((c=getchar())!='\n'&& c!=EOF);
}

void addBook()
{
if(book_count>=MAX_BOOKS)
{
printf("\nLibrary is full! Cannot add more books.\n");
return;
}
printf("\n--- Add New Book ---\n");
printf("Enter book name:");
fgets(l[book_count].bk_name,MAX_NAME_LENGTH,stdin);
l[book_count].bk_name[strcspn(l[book_count].bk_name,"\n")]='\0'; 
    
printf("Enter publisher name:");
fgets(l[book_count].publisher,MAX_PUBLISHER_LENGTH,stdin);
l[book_count].publisher[strcspn(l[book_count].publisher,"\n")] ='\0'; // Remove trailing newline
    
printf("Enter price:");
scanf("%f",&l[book_count].price);
clearInputBuffer();
    
l[book_count].is_available=1;
book_count++;
    
printf("\nBook added successfully!\n");
}

void displayAllBooks()
{
if(book_count==0)
{
printf("\nNo books available in the library.\n");
return;
}

printf("\n--- All Books in Library ---\n");
printf("%-30s %-25s %-10s %s\n","Book Name","Publisher","Price","Status");
printf("----------------------------------------------------------------------------\n");
for(inti=0;i<book_count;i++)
{
char status[15];
if(l[i].is_available)
{
strcpy(status,"Available");
}
else
{
strcpy(status,"Borrowed");
}
printf("%-30s %-25s $%-9.2f %s\n", 
l[i].bk_name,l[i].publisher,l[i].price,status);
}
}void displayHighestPriceBook()
{
if(book_count==0)
{
printf("\nNo books available in the library.\n");
return;
}
float max_price=l[0].price;
int max_index=0;
for(int i=1;i<book_count;i++)
{
if(l[i].price>max_price)
{         
max_price=l[i].price;
max_index=i;
}
}
printf("\n---Highest Price Book---\n");
printf("Book Name:%s\n",l[max_index].bk_name);
printf("Publisher:%s\n",l[max_index].publisher);
printf("Price: $%.2f\n", l[max_index].price);
}
